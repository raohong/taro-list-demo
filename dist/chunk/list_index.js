(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"19":function(t,e,a){"use strict";a.r(e),a.d(e,"default",function(){return d});var n=a(0),o=(a(96),a(1)),r=a(95),i=a(23),s=a(34),l=(a(85),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}),c=function(){function defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,a){return e&&defineProperties(t.prototype,e),a&&defineProperties(t,a),t}}(),u=function get(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:get(o,e,a)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(a):void 0};var p="240rpx",d=function(t){function List(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,List);var t=function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(List.__proto__||Object.getPrototypeOf(List)).apply(this,arguments));return t.refresh=function(){return t.count=0,t.fetch().then(function(e){var a=e.list,n=e.status;t.dataManager.clearAllLoadStatus(),t.dataManager.updateConfig({"itemSize":p}),"none"!==n?(t.dataManager.clear(),t.dataManager.setLoadStatus({"type":n},"140rpx")):t.dataManager.set(a),a.length?t.page+=1:(t.loadStatus="ended",t.dataManager.setLoadStatus({"type":"ened"},"140rpx"))})},t.handleLoadMore=function(){if("none"===t.loadStatus){t.loadStatus="loadMore";var e=t.dataManager.setLoadStatus({"type":"loadMore"},"140rpx").clearAndAddData;t.fetch().then(function(a){var n=a.list,o=a.status;t.loadStatus=o,e.apply(void 0,function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(n)),"none"!==o&&t.dataManager.setLoadStatus({"type":"ended"},"140rpx")})}},t.handleRefresh=function(e){"none"===t.loadStatus&&(t.page=1,t.loadStatus="refreshing",t.dataManager.clearAllLoadStatus(),t.dataManager.updateConfig({"itemSize":p}),t.refresh().then(e).catch(e))},t.page=1,t.state={"list":[]},t.loadStatus="none",t.dataManager=new i.VirutalListDataManager({"itemSize":p,"overscan":5,"estimatedSize":70,"onChange":function onChange(e){t.setState({"list":e})}},o.a),t.count=0,t}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(List,o["a"].Component),c(List,[{"key":"componentDidMount","value":function componentDidMount(){this.loadStatus="loading",this.dataManager.setLoadStatus({"type":"loading"},"140rpx"),this.refresh()}},{"key":"render","value":function render(){var t=this.state.list;return t.forEach(function(t){t.item.type||(t.item.avatarUrl="url("+t.item.author.avatar_url+") no-repeat center / cover")}),n.j.createElement(r.a,{"className":"page list-page"},n.j.createElement(s.a,{"onRefresh":this.handleRefresh,"onLoadMore":this.handleLoadMore,"virtual":!0,"height":"100vh","dataManager":this.dataManager},t.map(function(t){return"loadMore"===t.item.type?n.j.createElement(r.a,{"className":"loadStatus","style":t.style},"加载更多..."):"ended"===t.item.type?n.j.createElement(r.a,{"className":"loadStatus","style":t.style},"没有更多了"):"loading"===t.item.type?n.j.createElement(r.a,{"className":"loadStatus","style":t.style},"加载中..."):n.j.createElement(r.a,{"className":"topic-item","key":t.item.id,"style":l({},t.style)},n.j.createElement(r.a,{"className":"topic-item-inner"},n.j.createElement(r.a,{"style":{"background":t.item.avatarUrl},"className":"topic-item__avatar"}),n.j.createElement(r.a,null,n.j.createElement(r.a,{"className":"topic-item__title"},"#",t.index," - ",t.item.title),n.j.createElement(r.a,null,t.item.author.loginname))))})))}},{"key":"componentDidShow","value":function componentDidShow(){u(List.prototype.__proto__||Object.getPrototypeOf(List.prototype),"componentDidShow",this)&&u(List.prototype.__proto__||Object.getPrototypeOf(List.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){u(List.prototype.__proto__||Object.getPrototypeOf(List.prototype),"componentDidHide",this)&&u(List.prototype.__proto__||Object.getPrototypeOf(List.prototype),"componentDidHide",this).call(this)}}]),List}()},"85":function(t,e,a){}}]);